<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8">
    <script>
const API_BASE_URL = "http://localhost:3001";
window.API_BASE = API_BASE_URL + "/api";
</script>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</title>
    <link rel="stylesheet" href="../assets/css/patient-dashboard.css">
    <link rel="stylesheet" href="../assets/css/search.css">
        <style>
            .flatpickr-current-month,
            .flatpickr-monthDropdown-months,
            .flatpickr-monthDropdown-years,
            .flatpickr-monthDropdown-month,
            .flatpickr-monthDropdown-year,
            .flatpickr-months .flatpickr-month {
                font-family: Arial, Helvetica, 'Liberation Sans', 'DejaVu Sans', sans-serif !important;
                font-variant-numeric: normal !important;
                direction: ltr !important;
            }
            /* Force Western numerals in Flatpickr input fields */
            input.flatpickr-input, input[type="text"].flatpickr-input {
                font-family: Arial, Helvetica, 'Liberation Sans', 'DejaVu Sans', sans-serif !important;
                font-variant-numeric: normal !important;
                direction: ltr !important;
                unicode-bidi: plaintext !important;
            }
        </style>

    <!-- Flatpickr CSS/JS for Arabic date picker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ar.js"></script>
</head>
<body>
    <header class="pd-header">
        <div class="pd-header-inner">
            <div class="pd-left">
                <a href="/" class="logo">Ø£Ù†Ø§ Ù…Ø±ÙŠØ¶ Ø³ÙƒØ±ÙŠ</a>
            </div>
            <div class="pd-center">
                <button class="icon-btn search-btn" aria-label="Search">ğŸ”</button>
            </div>
            <div class="pd-right">
                <button class="icon-btn chat-btn" id="chatBtn" aria-label="Chat" title="Chat with Doctor">ğŸ’¬</button>
            </div>
        </div>
    </header>

    <main class="pd-main">
        <section class="pd-sidebar">
            <nav class="pd-nav" aria-label="Patient navigation">
                <ul>
                    <li data-nav="daily"><span class="mc-icon">ğŸ©º</span> <span class="mc-title">Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</span></li>
                    <li data-nav="history"><span class="mc-icon">ğŸ“„</span> <span class="mc-title">Ø³Ø¬Ù„ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</span></li>
                    <li data-nav="appointments"><span class="mc-icon">ğŸ“…</span> <span class="mc-title">Ù…ÙˆØ§Ø¹ÙŠØ¯ÙŠ</span></li>
                    <li data-nav="prescriptions"><span class="mc-icon">ğŸ’Š</span> <span class="mc-title">ÙˆØµÙØ§ØªÙŠ Ø§Ù„Ø·Ø¨ÙŠØ©</span></li>
                    <li data-nav="labs"><span class="mc-icon">ğŸ”¬</span> <span class="mc-title">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø®ØªØ¨Ø±</span></li>
                    <li data-nav="carb"><span class="mc-icon">ğŸ</span> <span class="mc-title">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª</span></li>
                    <li data-nav="personal-settings" class="active">
                        <span class="mc-icon">âš™ï¸</span>
                        <span class="mc-title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</span>
                    </li>
                </ul>
            </nav>
            <div style="margin-top:32px;text-align:center;">
                <button type="button" class="btn btn-outline" id="logoutBtn" style="min-width:120px;font-size:1rem;padding:10px 24px;border-radius:8px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </section>

        <section class="pd-content">
            <div class="card title-card" style="margin-bottom:32px;">
                <h1 style="font-size:2rem;font-weight:700;margin-bottom:0;">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h1>
            </div>
            <div class="card form-card" style="margin-bottom:32px;">
                <form id="personalSettingsForm" class="personal-settings-form">
                    <div class="form-section">
                        <h2 class="form-section-title">Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</h2>
                        <div class="form-grid">
                            <div class="field">
                                <label for="fullName" style="font-weight:600;">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                                <input type="text" id="fullName" name="fullName" class="form-input personal-input" required readonly>
                            </div>
                            <div class="field">
                                <label for="email" style="font-weight:600;">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <input type="email" id="email" name="email" class="form-input personal-input" required readonly>
                            </div>
                            <div class="field">
                                <label for="identityNumber" style="font-weight:600;">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</label>
                                <input type="text" id="identityNumber" name="identityNumber" class="form-input personal-input" readonly>
                            </div>
                            <div class="field">
                                <label for="address" style="font-weight:600;">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                                <input type="text" id="address" name="address" class="form-input personal-input" readonly>
                            </div>
                            <div class="field">
                                <label for="mobile" style="font-weight:600;">Ø§Ù„Ù‡Ø§ØªÙ</label>
                                <input type="tel" id="mobile" name="mobile" class="form-input personal-input" readonly>
                            </div>
                            <div class="field">
                                <label for="dob" style="font-weight:600;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
                                <input type="text" id="dob" name="dob" class="form-input personal-input" placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®" readonly autocomplete="off">
                            </div>
                        </div>
                    </div>
                    <div class="actions" style="display:flex;flex-wrap:wrap;gap:12px;justify-content:flex-end;margin-top:24px;">
                        <button type="button" class="btn btn-secondary" id="editBtn">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button type="submit" class="btn btn-primary" id="saveBtn" style="display:none;">Ø­ÙØ¸</button>
                        <button type="button" class="btn btn-danger" id="deleteBtn">Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                    </div>
                </form>
                <!-- Logout button moved to sidebar above -->
            </div>
        </section>
    </main>


    <script src="../assets/js/main.js" defer></script>
    <script src="../assets/js/auth-guard.js" defer></script>
    <script src="../assets/js/search.js" defer></script>
    <script src="settings.js" defer></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        if (window.flatpickr) {
            flatpickr("#dob", { dateFormat: "Y-m-d", locale: "ar", allowInput: true });
        }
    });
</script>
</body>
</html>
